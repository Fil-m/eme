{% extends "base.html" %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div style="margin-bottom: 2.5rem; text-align: center;">
        <h1 style="margin: 0; font-size: 2.5rem;">–ù–æ–≤–∞ –Ω–æ–¥–∞</h1>
        <p class="meta" style="font-size: 1.1rem; margin-top: 0.5rem;">{{ t('install_desc') }}</p>
    </div>

    <div class="card" style="padding: 2.5rem; border-top: 4px solid var(--primary); margin-bottom: 2rem;">
        <h3 style="margin-top: 0; font-size: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
            üì± {{ t('termux_instr') }}
        </h3>
        <p class="meta" style="margin-bottom: 1.5rem;">–Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Android.</p>

        <ol style="margin-bottom: 2rem; color: var(--text); line-height: 1.6;">
            <li>–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å <strong>Termux</strong> (—á–µ—Ä–µ–∑ F-Droid)
                <div class="meta" style="font-size: 0.8rem; margin-top: 0.25rem;">
                    ‚úÖ –®—É–∫–∞–π—Ç–µ: <strong>Termux</strong><br>
                    üëâ –û–ø–∏—Å: <em>Terminal emulator with packages</em>
                </div>
            </li>
            <li>–í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –Ω–∏–∂—á–µ —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ.
                <div
                    style="background: rgba(255,126,103,0.1); padding: 0.8rem; border-radius: 8px; font-size: 0.85rem; border: 1px solid rgba(255,126,103,0.2); margin-top: 0.5rem;">
                    ‚ö†Ô∏è <strong>–ü–æ—Ä–∞–¥–∞:</strong> –Ø–∫—â–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª –∑–∞–ø–∏—Ç–∞—î <code>(Y/I/N/O/D/Z)</code> ‚Äî –ø—Ä–æ—Å—Ç–æ —Ç–∏—Å–Ω—ñ—Ç—å
                    <strong>Enter</strong>.
                </div>
            </li>
        </ol>

        <div id="command-box"
            style="background: rgba(0,0,0,0.4); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); overflow-x: auto; font-family: 'Fira Code', monospace; color: var(--accent-blue); margin: 1.5rem 0; position: relative; box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);">
            <header
                style="padding: 0 0 0.75rem 0; margin-bottom: 0.75rem; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.7rem; color: var(--muted); background: none; backdrop-filter: none; position: static;">
                TERMINAL COMMAND</header>
            <span id="cmd-text">curl -O {{ my_address }}/install.sh && bash install.sh</span>
        </div>

        {% if is_local %}
        <div
            style="text-align: center; margin-top: 2rem; padding: 2rem; background: rgba(255,255,255,0.02); border-radius: 16px; border: 1px solid var(--border);">
            <p style="margin-bottom: 1.5rem; font-weight: 600;">{{ t('qr_install_label') }}</p>
            <div
                style="background: white; padding: 1.5rem; border-radius: 12px; display: inline-block; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                <img src="/qr?text={{ quote('curl -O ' + my_address + '/install.sh && bash install.sh') }}" width="220"
                    height="220" style="display: block;">
            </div>
        </div>
        {% else %}
        <div style="text-align: center; margin-top: 2rem;">
            <button class="btn" style="width: 100%; padding: 1.25rem; font-size: 1.1rem; justify-content: center;"
                onclick="copyAndNotify()">
                üìã –ö–û–ü–Ü–Æ–í–ê–¢–ò –î–õ–Ø TERMUX
            </button>
            <p class="meta" style="margin-top: 1rem;">–ö–æ–º–∞–Ω–¥—É –±—É–¥–µ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É.</p>
        </div>
        {% endif %}
    </div>

    <div class="card" style="padding: 2.5rem;">
        <h3 style="margin-top: 0; display: flex; align-items: center; gap: 0.75rem;">üíª {{ t('win_instr') }}</h3>
        <p class="meta" style="margin-bottom: 1.5rem;">–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ü–ö:</p>

        <div
            style="background: rgba(0,0,0,0.4); padding: 1.25rem; border-radius: 12px; border: 1px solid var(--border); font-family: monospace; font-size: 0.9rem; color: #fff; margin-bottom: 1.5rem; line-height: 1.6;">
            git clone https://github.com/Fil-m/eme.git<br>
            cd eme<br>
            pip install -r requirements.txt<br>
            python app.py
        </div>

        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <a href="/bundle.zip" class="btn btn-secondary" style="justify-content: center; padding: 1rem;">
                ‚¨áÔ∏è –°–∫–∞—á–∞—Ç–∏ bundle.zip (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
            </a>
        </div>
    </div>
</div>

<script>
    function copyAndNotify() {
        const cmdText = document.getElementById('cmd-text').innerText;
        navigator.clipboard.writeText(cmdText).then(() => {
            alert("–ö–æ–º–∞–Ω–¥—É —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ! –í—Å—Ç–∞–≤—Ç–µ —ó—ó –≤ Termux.");
        }).catch(err => {
            console.error('Copy failed:', err);
        });
    }
</script>
{% endblock %}