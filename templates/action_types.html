{% extends "base.html" %}

{% block content %}

<h2>{{ t('types_title') }}</h2>
<p class="meta">{{ t('types_desc') }}</p>

<div
    style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); margin-bottom: 2rem;">
    {% for type in types %}
    <a href="/do/{{ type.id }}" class="card"
        style="text-decoration: none; color: inherit; display: block; border: 1px solid var(--border);">
        <strong>{{ type.name }}</strong>
        <div class="meta" style="font-size: 0.8rem; margin-top: 0.5rem;">{{ type.description or '...' }}</div>
    </a>
    {% endfor %}
</div>

<!-- Simple inline create -->
<div class="card">
    <h3>{{ t('types_create_title') }}</h3>
    <form action="/types/new" method="POST">
        <input name="name" placeholder="{{ t('types_placeholder_name') }}" required>
        <input name="description" placeholder="{{ t('types_placeholder_desc') }}">

        <details>
            <summary class="meta" style="cursor: pointer; margin-bottom: 0.5rem;">{{ t('types_setup_fields') }}
            </summary>
            <p class="meta">{{ t('types_fields_desc') }}</p>
            <textarea name="schema" rows="4" style="font-family: monospace;">{"fields": [
  {"name": "recipient", "label": "{{ t('types_schema_recipient') }}"},
  {"name": "details", "label": "{{ t('types_schema_details') }}"}
]}</textarea>
        </details>

        <button class="btn" style="margin-top: 0.5rem;">{{ t('types_btn_create') }}</button>
    </form>
</div>

{% endblock %}